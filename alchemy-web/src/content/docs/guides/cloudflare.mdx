---
title: Cloudflare Auth
description: Configure Cloudflare authentication for your Alchemy applications. Learn to use API tokens, OAuth, or global API keys to securely manage Cloudflare resources.
sidebar:
  order: 0
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Authentication is configured using the [`alchemy configure`](/concepts/cli#configure) command. 

There are three supported ways of authorizing Alchemy with Cloudflare:
1. OAuth - a token created by oauth with cloudflare
21. API Token - a token you create once with limited scopes
3. Global API Key (legacy) - the global, highly permissive API key

## OAuth

1. Run `alchemy configure` and enter a profile name (or use the default profile).
2. Select "OAuth".
3. If you want to customize the scopes, select "Customize scopes", and select the desired scopes
4. A browser window will open prompting you to authorize alchemy with Cloudflare.
5. Once authorized return to the terminal and select the cloudflare account you want to use.

:::info
By default alchemy will configure OAuth tokens with the same scopes as [wrangler](https://developers.cloudflare.com/workers/wrangler/).
:::

## API Token

1. Run `alchemy configure` and enter a profile name (or use the default profile).
2. Select "API Token".
3. Go to the cloudflare dashboard and configure [an API Token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/)
4. Select the cloudflare account you want to use.

## API Key
:::caution
These keys have several limitations that make them less secure than API tokens. Whenever possible, use API tokens to interact with the Cloudflare API. 

See [Cloudflare's API Docs](https://developers.cloudflare.com/api/).
:::

1. Run `alchemy configure` and enter a profile name (or use the default profile).
2. Select "API Key".
3. Go to the cloudflare dashboard and configure [an API Key](https://developers.cloudflare.com/fundamentals/api/get-started/keys/).
4. Select the cloudflare account you want to use.

## Environment Variables

Alchemy will automatically use available credentials from environment variables or a `.env` file.

```sh
CLOUDFLARE_API_TOKEN=<token>
CLOUDFLARE_ACCOUNT_ID=<account-id>
```

or

```sh
CLOUDFLARE_API_KEY=<key>
CLOUDFLARE_EMAIL=<email>
```

## Manual Configuration

You can explicitly set an `apiToken` when creating a Cloudflare Resource, such as a `Worker`:

```ts
await Worker("my-worker", {
  apiToken: alchemy.secret(process.env.MY_TOKEN).
	accountId: process.env.MY_ACCOUNT_ID
});
```

or

```ts
await Worker("my-worker", {
  apiKey: alchemy.secret(process.env.MY_GLOBAL_KEY),
  email: process.env.MY_ACCOUNT_EMAIL
});

:::caution
To use `alchemy.secret`, you must set a `password` when initializing your alchemy app. See [Encryption Password](/concepts/secret#encryption-password).
:::